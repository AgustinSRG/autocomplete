<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8'>
  <meta
    name='viewport'
    content='width=device-width, initial-scale=1.0'
  >
  <meta
    http-equiv='X-UA-Compatible'
    content='ie=edge'
  >
  <title>Document</title>
  <link
    rel='stylesheet'
    href='../packages/style.css'
  >
  <style>
    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    .container,
    #app {
      padding: 96px 16px 0;
      margin: 0 auto;
      max-width: 400px;
    }

    /* .autocomplete-result {
      border-top: 1px solid #eee;
      padding: 16px;
      background: transparent;
    }

    .wiki-title {
      font-size: 20px;
      margin-bottom: 8px;
    }

    .wiki-snippet {
      font-size: 14px;
      color: rgba(0, 0, 0, 0.54);
    } */
  </style>
</head>

<body>
  <div class='container'>
    <div
      id='autocomplete'
      class='autocomplete'
    >
      <input class='autocomplete-input'>
      <ul class='autocomplete-results'></ul>
    </div>
  </div>
  <div id='app'>
    <autocomplete :search='search'>
      <!-- <template v-slot='{ results, resultProps }'>
        <li
          v-for='(result, index) in results'
          v-bind='resultProps[index]'
          :key="'autocomplete-result-' + index"
        >
          <div class='wiki-title'>
            {{ result.title }}
          </div>
          <div
            class='wiki-snippet'
            v-html='result.snippet'
          ></div>
        </li>
      </template> -->
    </autocomplete>
  </div>

  <!-- <script
    crossorigin="anonymous"
    src="https://polyfill.io/v3/polyfill.min.js?flags=gated&features=default%2CPromise"
  ></script> -->
  <!-- <script src='https://cdn.jsdelivr.net/npm/vue/dist/vue.js'></script> -->
  <!-- <script src='./packages/autocomplete-vue/dist/autocomplete.min.js'></script> -->
  <script src='./packages/autocomplete-js/dist/autocomplete.min.js'></script>
  <script src='./docs/data/data.js'></script>
  <script>
    // import AutocompleteJs from '../packages/autocomplete-js/Autocomplete.js'
    // import './docs/data/data.js'
    var wikiUrl = "https://en.wikipedia.org";
    var params = "action=query&list=search&format=json&origin=*"; // Search function can return a promise
    // which resolves with an array of
    // results. In this case we're using
    // the Wikipedia search API.

    var search = function search(input) {
      var url = ""
        .concat(wikiUrl, "/w/api.php?")
        .concat(params, "&srsearch=")
        .concat(encodeURI(input));
      return new Promise(function (resolve) {
        if (input.length < 3) {
          return resolve([]);
        }

        fetch(url)
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
            resolve(data.query.search);
          });
      });
    };

    var simpleSearch = function simpleSearch(input) {
      if (!input.length) {
        return [];
      }

      return countries.filter(function (country) {
        return country.toLowerCase().startsWith(input.toLowerCase());
      });
    }; // Control the rendering of the results
    // list. Let's show the title and snippet
    // from the Wikipedia results

    var renderResults = function renderResults(results, props) {
      return results
        .map(function (result, index) {
          return "\n    <li "
            .concat(props[index], ">\n      <div class='wiki-title'>\n        ")
            .concat(
              result.title,
              "\n      </div>\n      <div class='wiki-snippet'>\n        "
            )
            .concat(result.snippet, "\n      </div>\n    </li>\n  ");
        })
        .join("\n");
    }; // Wikipedia returns a format like this:
    //
    // {
    //   pageid: 12345,
    //   title: 'Article title',
    //   ...
    // }
    //
    // We want to display the title

    var getResultValue = function getResultValue(result) {
      return result.title;
    }; // Open the selected article in a new window

    var onSubmit = function onSubmit(result) {
      window.open("".concat(wikiUrl, "/wiki/").concat(encodeURI(result.title)));
    };

    new Autocomplete('#autocomplete', {
      search: simpleSearch,
      // getResultValue,
      // onSubmit,
      // renderResults
    })

    // new Vue({
    //   el: "#app",
    //   components: {
    //     autocomplete: Autocomplete
    //   },
    //   data: {
    //     search: simpleSearch
    //   }
    // });
  </script>
</body>

</html>
